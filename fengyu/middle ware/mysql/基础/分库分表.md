## 分库分表

#### 数据量增长导致的问题

随着时间推移，表中的数据量越来越多，数据库承载的数据量和数据库数据处理能力遇到瓶颈，具体表现为：

- 一台服务器的资源是有限的
- 数据库中的数据量不可控
- 数据库中的表越来越多
- 表中的数据量越来越大
- 增删改查开销越来越大

优化手段：
1. 从SQL语句优化，例如增加索引
2. 从数据库设计上入手


#### 数据库拆分
把原本存储在同一个库的数据分块存储到多个库上
把原来存储于同一个表的数据分块存储到多个表上。

#### 常用切分方案
根据其切分规则的类型，可以划分为三种切分模式：

- 垂直(纵向)拆分：按照不同的表(或者Schema)切分到不同的数据库上，按照业务模块划分。
- 水平(横向)拆分：根据表中数据的逻辑关系，将同一个表中的数据按照某种条件拆分到多台数据库上

#### 分库分表解决方案
###### 应用层：
- 当当 Sharding JDBC
- 阿里 TDDL

###### proxy中间件(代理层)：
- 社区：Mycat-cobar
- 数字：Altas
- 百度：heinsberge
- youtube：vitess

#### 分库分表面临的问题
1. 分片规则和策略 数据应该如何规划存储
2. 分布式全局唯一ID 原本的数据ID自增无法继续使用了
3. 多数据源管理问题
4. 跨库跨表join的问题 

#### mycat
1. 支持两个表join
2. mycat运行需要较高的内存，需要单独部署
3. mycat通过模拟mysql引擎，二次解析。
